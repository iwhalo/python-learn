<!--
æ–‡ä»¶: index.html
ç”¨é€”: å©šç¤¼é‚€è¯·å‡½ç½‘ç«™é¦–é¡µæ¨¡æ¿
åŠŸèƒ½: å±•ç¤ºå©šç¤¼åŸºæœ¬ä¿¡æ¯ã€å€’è®¡æ—¶ã€ç›¸å†Œé¢„è§ˆã€å¯¼èˆªé“¾æ¥ç­‰
-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- é¡µé¢åŸºç¡€ä¿¡æ¯è®¾ç½® -->
    <meta charset="UTF-8">
    <!-- å“åº”å¼è®¾è®¡è§†å£è®¾ç½® -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- é¡µé¢æ ‡é¢˜ï¼ŒåŠ¨æ€æ˜¾ç¤ºå©šç¤¼æ ‡é¢˜æˆ–é»˜è®¤æ–‡æœ¬ -->
    <title>{{ wedding_event.title|default:"å©šç¤¼é‚€è¯·" }} - æˆ‘ä»¬çš„ç‰¹åˆ«æ—¥å­</title>
    <!-- å¼•å…¥æœ¬åœ°æ ·å¼è¡¨ -->
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- å¼•å…¥Google Fontsä¸­æ–‡å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Serif SC', serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #5a3d5c;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* å¤´éƒ¨åŒºåŸŸ */
        .header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,245,240,0.9) 100%);
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #d4af37;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .couple-names {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .name {
            font-size: 2.5rem;
            font-weight: bold;
            color: #8b4513;
            position: relative;
            padding: 0 20px;
        }

        .name::before,
        .name::after {
            content: 'ğŸ’•';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }

        .name::before {
            left: 0;
        }

        .name::after {
            right: 0;
        }

        /* å©šç¤¼ä¿¡æ¯å¡ç‰‡ */
        .event-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .event-card h2 {
            color: #d4af37;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .event-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .detail-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #d4af37;
        }

        .detail-item h3 {
            color: #666;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .detail-item p {
            font-size: 1.1rem;
            color: #333;
            font-weight: bold;
        }

        /* å›¾ç‰‡è½®æ’­åŒºåŸŸ */
        .gallery-section {
            margin: 40px 0;
        }

        .gallery-title {
            text-align: center;
            font-size: 2rem;
            color: #d4af37;
            margin-bottom: 30px;
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .gallery-item {
            min-height: 200px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .gallery-item img {
            width: 100%;
            height: auto;
            object-fit: contain; /* ä¿æŒåŸå§‹æ¯”ä¾‹ï¼Œå®Œæ•´æ˜¾ç¤ºå›¾ç‰‡ */
            flex-shrink: 0;
            background: #f0f0f0; /* ä¸ºç¼ºå¤±çš„å›¾ç‰‡æä¾›èƒŒæ™¯è‰² */
            object-position: center; /* ç¡®ä¿å›¾ç‰‡å±…ä¸­æ˜¾ç¤º */
        }
        
        .gallery-item-content {
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gallery-item:hover {
            transform: scale(1.05);
        }



        /* å€’è®¡æ—¶åŒºåŸŸ */
        .countdown-section {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #fff5f0 0%, #ffeae6 100%);
            border-radius: 15px;
            margin: 40px 0;
        }

        .countdown-title {
            font-size: 1.8rem;
            color: #d4af37;
            margin-bottom: 20px;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .countdown-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            min-width: 80px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .countdown-number {
            font-size: 2rem;
            font-weight: bold;
            color: #d4af37;
            line-height: 1;
        }

        .countdown-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        /* RSVPæŒ‰é’® */
        .rsvp-button {
            display: inline-block;
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: bold;
            margin: 20px 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .rsvp-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        /* å¯¼èˆªé“¾æ¥ */
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .nav-link {
            background: white;
            padding: 12px 24px;
            border-radius: 20px;
            text-decoration: none;
            color: #5a3d5c;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .nav-link:hover {
            background: #d4af37;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .name {
                font-size: 1.8rem;
                margin: 10px 0;
            }

            .couple-names {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }

            .countdown-item {
                min-width: 60px;
                padding: 15px 10px;
            }

            .countdown-number {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡µé¢å¤´éƒ¨åŒºåŸŸï¼Œæ˜¾ç¤ºå©šç¤¼æ ‡é¢˜å’Œæ–°äººå§“å -->
        <div class="header">
            <!-- åŠ¨æ€æ˜¾ç¤ºå©šç¤¼æ ‡é¢˜ï¼Œå¦‚æœæœªè®¾ç½®åˆ™æ˜¾ç¤ºé»˜è®¤æ–‡æœ¬ -->
            <h1>{{ wedding_event.title|default:"æˆ‘ä»¬çš„å©šç¤¼" }}</h1>
            
            <!-- æ¡ä»¶æ˜¾ç¤ºæ–°äººå§“åï¼Œåªæœ‰å½“æ–°å¨˜å’Œæ–°éƒå§“åéƒ½å­˜åœ¨æ—¶æ‰æ˜¾ç¤º -->
            {% if wedding_event.bride_name and wedding_event.groom_name %}
            <!-- æ–°äººå§“åå±•ç¤ºåŒºåŸŸï¼Œä½¿ç”¨flexå¸ƒå±€å¹¶æ’æ˜¾ç¤º -->
            <div class="couple-names">
                <!-- æ˜¾ç¤ºæ–°å¨˜å§“å -->
                <div class="name">{{ wedding_event.bride_name }}</div>
                <!-- åˆ†éš”ç¬¦ -->
                <div class="name">&</div>
                <!-- æ˜¾ç¤ºæ–°éƒå§“å -->
                <div class="name">{{ wedding_event.groom_name }}</div>
            </div>
            {% endif %}

            <p style="font-size: 1.2rem; margin-top: 20px; color: #666;">
                è¯šæŒšé‚€è¯·æ‚¨å‚åŠ æˆ‘ä»¬çš„å©šç¤¼
            </p>
        </div>

        <!-- å¯¼èˆªé“¾æ¥åŒºåŸŸï¼Œæä¾›åˆ°å„ä¸ªåŠŸèƒ½é¡µé¢çš„å¿«é€Ÿè®¿é—® -->
        <div class="nav-links">
            <!-- å©šç¤¼å€’è®¡æ—¶é¡µé¢é“¾æ¥ -->
            <a href="{% url 'countdown' %}" class="nav-link">å©šç¤¼å€’è®¡æ—¶</a>
            <!-- å©šçº±ç›¸å†Œé¡µé¢é“¾æ¥ -->
            <a href="{% url 'gallery' %}" class="nav-link">å©šçº±ç›¸å†Œ</a>
            <!-- å®¾å®¢åˆ—è¡¨é¡µé¢é“¾æ¥ -->
            <a href="{% url 'guest_list' %}" class="nav-link">å®¾å®¢åˆ—è¡¨</a>
            <!-- åœ°å›¾ä½ç½®é¡µé¢é“¾æ¥ -->
            <a href="{% url 'map' %}" class="nav-link">åœ°å›¾ä½ç½®</a>
            <!-- RSVPç¡®è®¤å‡ºå¸­é¡µé¢é“¾æ¥ -->
            <a href="{% url 'rsvp' %}" class="nav-link">ç¡®è®¤å‡ºå¸­</a>
        </div>

        <!-- å©šç¤¼è¯¦æƒ…å¡ç‰‡ï¼Œæ˜¾ç¤ºå©šç¤¼çš„å…·ä½“ä¿¡æ¯ -->
        <!-- åªæœ‰å½“å­˜åœ¨å©šç¤¼äº‹ä»¶æ—¶æ‰æ˜¾ç¤ºè¯¦æƒ… -->
        {% if wedding_event %}
        <div class="event-card">
            <!-- å©šç¤¼è¯¦æƒ…æ ‡é¢˜ -->
            <h2>å©šç¤¼è¯¦æƒ…</h2>
            <!-- å©šç¤¼è¯¦æƒ…ç½‘æ ¼å¸ƒå±€ -->
            <div class="event-details">
                <!-- å©šç¤¼æ—¥æœŸä¿¡æ¯ -->
                <div class="detail-item">
                    <h3>å©šç¤¼æ—¥æœŸ</h3>
                    <!-- ä½¿ç”¨Djangoæ¨¡æ¿è¿‡æ»¤å™¨æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´ -->
                    <p>{{ wedding_event.event_date|date:"Yå¹´mæœˆdæ—¥ H:i" }}</p>
                </div>
                <!-- å©šç¤¼ä¸¾åŠåœ°ç‚¹ä¿¡æ¯ -->
                <div class="detail-item">
                    <h3>ä¸¾åŠåœ°ç‚¹</h3>
                    <p>{{ wedding_event.venue }}</p>
                </div>
                <!-- å©šç¤¼è¯¦ç»†åœ°å€ä¿¡æ¯ -->
                <div class="detail-item">
                    <h3>è¯¦ç»†åœ°å€</h3>
                    <p>{{ wedding_event.address }}</p>
                </div>
            </div>
            
            {% if wedding_event.description %}
            <div class="detail-item" style="margin-top: 20px; text-align: left;">
                <h3>å©šç¤¼æè¿°</h3>
                <p>{{ wedding_event.description|linebreaks }}</p>
            </div>
            {% endif %}
        </div>
        {% endif %}

        <!-- å©šç¤¼å€’è®¡æ—¶åŒºåŸŸï¼Œæ˜¾ç¤ºè·ç¦»å©šç¤¼è¿˜å‰©å¤šé•¿æ—¶é—´ -->
        <div class="countdown-section">
            <!-- å€’è®¡æ—¶æ ‡é¢˜ -->
            <h2 class="countdown-title">è·ç¦»æˆ‘ä»¬çš„å¤§æ—¥å­è¿˜æœ‰</h2>
            <!-- å€’è®¡æ—¶è®¡æ—¶å™¨ï¼ŒåŒ…å«å¤©ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’å››ä¸ªéƒ¨åˆ† -->
            <div class="countdown-timer">
                <!-- å¤©æ•°å€’è®¡æ—¶ -->
                <div class="countdown-item">
                    <!-- å¤©æ•°æ˜¾ç¤ºå…ƒç´ ï¼ŒIDç”¨äºJavaScriptæ›´æ–° -->
                    <div class="countdown-number" id="days">00</div>
                    <div class="countdown-label">å¤©</div>
                </div>
                <!-- å°æ—¶å€’è®¡æ—¶ -->
                <div class="countdown-item">
                    <!-- å°æ—¶æ˜¾ç¤ºå…ƒç´ ï¼ŒIDç”¨äºJavaScriptæ›´æ–° -->
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">å°æ—¶</div>
                </div>
                <!-- åˆ†é’Ÿå€’è®¡æ—¶ -->
                <div class="countdown-item">
                    <!-- åˆ†é’Ÿæ˜¾ç¤ºå…ƒç´ ï¼ŒIDç”¨äºJavaScriptæ›´æ–° -->
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">åˆ†é’Ÿ</div>
                </div>
                <!-- ç§’æ•°å€’è®¡æ—¶ -->
                <div class="countdown-item">
                    <!-- ç§’æ•°æ˜¾ç¤ºå…ƒç´ ï¼ŒIDç”¨äºJavaScriptæ›´æ–° -->
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">ç§’</div>
                </div>
            </div>
        </div>

        <!-- RSVPç¡®è®¤å‡ºå¸­æŒ‰é’®ï¼Œå¼•å¯¼ç”¨æˆ·ç¡®è®¤æ˜¯å¦å‚åŠ å©šç¤¼ -->
        <div style="text-align: center; margin: 40px 0;">
            <!-- é“¾æ¥åˆ°RSVPé¡µé¢ï¼Œè®©ç”¨æˆ·ç¡®è®¤å‡ºå¸­æˆ–å‘é€ç¥ç¦ -->
            <a href="{% url 'rsvp' %}" class="rsvp-button">ç¡®è®¤å‡ºå¸­ / å‘é€ç¥ç¦</a>
        </div>
            
        <!-- é¡µé¢è®¿é—®ç»Ÿè®¡ä¿¡æ¯ï¼Œæ˜¾ç¤ºå½“å‰é¡µé¢è¢«è®¿é—®çš„æ¬¡æ•° -->
        <div style="text-align: center; margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #d4af37;">
            <p style="margin: 0; color: #666;">
                <strong>é¡µé¢è®¿é—®ç»Ÿè®¡:</strong> 
                <!-- æ˜¾ç¤ºé¦–é¡µè®¿é—®æ¬¡æ•°ï¼Œå¦‚æœæ²¡æœ‰ç»Ÿè®¡æ•°æ®åˆ™æ˜¾ç¤º0 -->
                æœ¬é¡µé¢å·²è¢«è®¿é—® <span style="color: #d4af37; font-weight: bold;">{{ homepage_visit_count|default:0 }}</span> æ¬¡
            </p>
        </div>

        <!-- å©šçº±ç›¸å†Œé¢„è§ˆåŒºåŸŸï¼Œæ˜¾ç¤ºå©šç¤¼ç›¸å†Œä¸­çš„å›¾ç‰‡ -->
        <!-- åªæœ‰å½“å­˜åœ¨ç›¸å†Œå›¾ç‰‡æ—¶æ‰æ˜¾ç¤ºç›¸å†Œéƒ¨åˆ† -->
        {% if gallery_images %}
        <div class="gallery-section">
            <!-- ç›¸å†Œæ ‡é¢˜ -->
            <h2 class="gallery-title">å©šçº±ç›¸å†Œ</h2>
            <!-- å›¾ç‰‡ç½‘æ ¼å¸ƒå±€ -->
            <div class="image-gallery">
                <!-- éå†ç›¸å†Œå›¾ç‰‡åˆ—è¡¨ -->
                {% for image in gallery_images %}
                <div class="gallery-item">
                    <!-- æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ˜¾ç¤ºå®é™…å›¾ç‰‡ï¼Œå¦åˆ™æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡ -->
                    {% if image.has_image %}
                    <!-- æ˜¾ç¤ºå®é™…çš„ç›¸å†Œå›¾ç‰‡ -->
                    <img src="{{ image.get_image_url }}" alt="{{ image.title }}">
                    {% else %}
                    <!-- æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡ï¼Œå¦‚æœé»˜è®¤å›¾ç‰‡ä¹ŸåŠ è½½å¤±è´¥åˆ™æ˜¾ç¤ºå¤‡ç”¨å›¾ç‰‡ -->
                    <img src="/static/images/default_gallery.jpg" alt="{{ image.title }}" onerror="this.onerror=null;this.src='/static/images/default_image.png';">
                    {% endif %}
                    <!-- å›¾ç‰‡å†…å®¹åŒºåŸŸï¼Œæ˜¾ç¤ºå›¾ç‰‡æ ‡é¢˜ -->
                    <div class="gallery-item-content">
                        <div style="text-align: center;">
                            <!-- æ˜¾ç¤ºå›¾ç‰‡æ ‡é¢˜ -->
                            <h4 style="color: #d4af37; margin: 5px 0;">{{ image.title }}</h4>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>

    <script>
        // å©šç¤¼å€’è®¡æ—¶åŠŸèƒ½
        // åŠŸèƒ½ï¼šè®¡ç®—å¹¶æ˜¾ç¤ºè·ç¦»å©šç¤¼è¿˜æœ‰å¤šå°‘æ—¶é—´
        function updateCountdown() {
            // ä»åç«¯è·å–å©šç¤¼æ—¥æœŸå¹¶è½¬æ¢ä¸ºJavaScript Dateå¯¹è±¡
            const weddingDate = new Date('{{ wedding_event.event_date|date:"Y-m-d H:i:s" }}');
            // è·å–å½“å‰æ—¶é—´
            const now = new Date();
            
            // å¦‚æœæ²¡æœ‰è·å–åˆ°æœ‰æ•ˆçš„å©šç¤¼æ—¥æœŸï¼Œåˆ™è®¾ç½®ä¸€ä¸ªç¤ºä¾‹æ—¥æœŸ
            if (isNaN(weddingDate.getTime())) {
                // è®¾ç½®ä¸ºæœªæ¥ä¸€å‘¨ï¼Œç”¨äºæ¼”ç¤ºç›®çš„
                const futureDate = new Date();
                futureDate.setDate(futureDate.getDate() + 7);
                var diff = futureDate - now;
            } else {
                // è®¡ç®—å©šç¤¼æ—¥æœŸä¸å½“å‰æ—¶é—´çš„å·®å€¼ï¼ˆæ¯«ç§’ï¼‰
                var diff = weddingDate - now;
            }
            
            // å¦‚æœå€’è®¡æ—¶ä»åœ¨è¿›è¡Œä¸­ï¼ˆå·®å€¼å¤§äº0ï¼‰
            if (diff > 0) {
                // è®¡ç®—å¤©æ•°
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                // è®¡ç®—å°æ—¶æ•°
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                // è®¡ç®—åˆ†é’Ÿæ•°
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                // è®¡ç®—ç§’æ•°
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                // æ›´æ–°å¤©æ•°æ˜¾ç¤º
                document.getElementById('days').textContent = String(days).padStart(2, '0');
                // æ›´æ–°å°æ—¶æ˜¾ç¤º
                document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                // æ›´æ–°åˆ†é’Ÿæ˜¾ç¤º
                document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                // æ›´æ–°ç§’æ•°æ˜¾ç¤º
                document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
            } else {
                // å¦‚æœå©šç¤¼å·²ç»ä¸¾è¡Œï¼Œå°†æ‰€æœ‰æ—¶é—´æ˜¾ç¤ºä¸º00
                document.getElementById('days').textContent = '00';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
            }
        }
        
        // åˆå§‹åŒ–å€’è®¡æ—¶å¹¶è®¾ç½®æ¯ç§’æ›´æ–°ä¸€æ¬¡
        updateCountdown();
        setInterval(updateCountdown, 1000);
        
        // é¡µé¢åŠ è½½å®Œæˆåæ·»åŠ åŠ¨ç”»æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            // ä¸ºé¡µé¢ä¸»è¦å…ƒç´ æ·»åŠ æ·¡å…¥åŠ¨ç”»æ•ˆæœ
            const elements = document.querySelectorAll('.event-card, .countdown-section, .gallery-section');
            elements.forEach((el, index) => {
                // åˆå§‹çŠ¶æ€ï¼šå®Œå…¨é€æ˜ï¼Œå‘ä¸‹åç§»
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                // å»¶è¿Ÿæ‰§è¡ŒåŠ¨ç”»ï¼Œåˆ›é€ é¡ºåºå‡ºç°çš„æ•ˆæœ
                setTimeout(() => {
                    // æ·»åŠ è¿‡æ¸¡æ•ˆæœ
                    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                    // æœ€ç»ˆçŠ¶æ€ï¼šå®Œå…¨ä¸é€æ˜ï¼Œå›åˆ°åŸä½
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 200);
            });
        });
    </script>
</body>
</html>